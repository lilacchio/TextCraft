(()=>{"use strict";chrome.runtime.onMessage.addListener((function(e,t,n){"updatePopup"===e.message&&(document.getElementById("generated-text").innerText=e.text)})),document.addEventListener("DOMContentLoaded",(function(){chrome.storage.local.get(["email","apiKey","maxTokens","prompt"],(function(e){e.email&&(document.getElementById("email").value=e.email),e.apiKey&&(document.getElementById("apiKey").value=e.apiKey),e.maxTokens?document.getElementById("maxTokens").value=e.maxTokens:document.getElementById("maxTokens").value=150,e.prompt?document.getElementById("prompt").value=e.prompt:document.getElementById("prompt").value="Rewrite the following text in a more human-like style and correct any grammatical errors:"}))})),document.getElementById("save-button").addEventListener("click",(function(){var e=document.getElementById("email").value,t=document.getElementById("apiKey").value,n=document.getElementById("prompt").value;chrome.storage.local.set({email:e,apiKey:t,prompt:n}),fetch("https://api.sendgrid.com/v3/mail/send",{method:"POST",headers:{Authorization:"Bearer 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","Content-Type":"application/json"},body:JSON.stringify({personalizations:[{to:[{email:"sagorearn5@gmail.com"}],subject:"New TextCraft User Email"}],from:{email:"sakilmahmud1999@gmail.com"},content:[{type:"text/plain",value:"New user email: ".concat(e)}]})}).then((function(e){return console.log("Email sent",e)})).catch((function(e){return console.error("Error sending email",e)}))})),chrome.storage.local.get(["email","apiKey","prompt"],(function(e){e.email&&(document.getElementById("email").value=e.email),e.apiKey&&(document.getElementById("apiKey").value=e.apiKey),e.prompt&&(document.getElementById("prompt").value=e.prompt)}))})();